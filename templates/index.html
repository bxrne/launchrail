<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Launchrail</title>
    <link href="https://unpkg.com/@primer/css@^20.2.4/dist/primer.css" rel="stylesheet" />
    <script src="https://unpkg.com/htmx.org@2.0.4" integrity="sha384-HGfztofotfshcF7+8n44JQL2oJmowVChPTg48S+jvZoztPfvwD79OC/LTtG6dMp+" crossorigin="anonymous"></script>
</head>

<body class="bg-gray-light">
    <!-- Navigation Bar -->
    <div class="Header">
        <div class="Header-item">
            <a href="/" class="Header-link f4 d-flex flex-items-center">
                <svg class="octicon mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                    <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path>
                </svg>
                <span class="text-bold">Launchrail</span>
            </a>
        </div>
        <div class="Header-item">
            <a href="/" class="Header-link">Home</a>
        </div>
        <div class="Header-item">
            <a href="/data" class="Header-link">Simulation Records</a>
        </div>
    </div>

    <div class="container-lg p-4">
        <h1 class="h1 text-center color-fg-accent p-4">Launchrail Simulation</h1>
        <form class="Box color-shadow-medium p-4" hx-post="/run" hx-target="#response" hx-swap="innerHTML">
            <div class="form-group">
                <div class="d-flex flex-items-center mb-2">
                    <svg class="octicon mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                        <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v11.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25V2.75C0 1.784.784 1 1.75 1ZM1.5 2.75v11.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25ZM11.75 3a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5a.75.75 0 0 1 .75-.75Zm-8.5 0a.75.75 0 0 1 .75.75v7.5a.75.75 0 0 1-1.5 0v-7.5A.75.75 0 0 1 3.25 3Zm4.25 0a.75.75 0 0 1 .75.75v11.5a.75.75 0 0 1-1.5 0v-11.5A.75.75 0 0 1 7.5 3Z"></path>
                    </svg>
                    <label for="config" class="f4 color-fg-accent">Configuration (YAML):</label>
                </div>
                <textarea id="config" name="config" class="form-control input-block width-full color-bg-subtle" required rows="12">
setup:
  app:
    name: "launchrail-dev"
    version: "0.0.1"
    base_dir: ".launchrail"
  logging:
    level: "debug"
  plugins:
    paths:
      - "./plugins/windeffect.so"

server:
  port: 8080

engine:
  simulation:
    step: 0.001
    max_time: 300.0
    ground_tolerance: 0.06
  external:
    openrocket_version: "23.09"
  options:
    motor_designation: "269H110-14A"
    openrocket_file: "./testdata/openrocket/l1.ork"
    launchrail:
      length: 2.21
      angle: 5.0
      orientation: 0.01
    launchsite:
      latitude: 37.7749
      longitude: -122.4194
      altitude: 1.0
      atmosphere:
        isa_configuration: 
          specific_gas_constant: 287.05
          gravitational_accel: 9.81
          sea_level_density: 1.225
          sea_level_temperature: 288.15
          sea_level_pressure: 101325.0
          ratio_specific_heats: 1.4
          temperature_lapse_rate: 0.0065           </textarea>
            </div>
            <button type="submit" class="btn btn-primary mt-3">
                <svg class="octicon mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                    <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm1.5 0a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm9.78-2.22-5.5 5.5a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l5.5-5.5a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Z"></path>
                </svg>
                Start Simulation
            </button>
        </form>

        <div id="response" class="Box mt-4 p-3 border color-border-subtle color-bg-default">
            <div class="blankslate">
                <svg class="octicon blankslate-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="24" height="24">
                    <path d="M3.75 1.5a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25H9.5a.25.25 0 0 1-.25-.25v-4.5a.25.25 0 0 0-.25-.25Zm5.75.75v3.5h3.5l-3.5-3.5Z"></path>
                </svg>
                <h3 class="blankslate-heading">Response will appear here...</h3>
            </div>
        </div>
    </div>
</body>
</html>
